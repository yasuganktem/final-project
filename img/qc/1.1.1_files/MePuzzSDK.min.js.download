!function(){var e="MePuzzSDK",t=["https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js","https://www.gstatic.com/firebasejs/7.14.4/firebase-messaging.js"],n="/MePuzzWorker.js",o="266761263864",i="mePuzzDb",a,r,s=[],l=[],c="https://mePuzz.com/api/",d=null,m=!1,u=[],p=[],g=[],v,h;function w(e){v=e.source,h=e.origin;let t=we(N,"isSubdomain"),n=ie();var o;if("granted"!==Notification.permission&&n&&t&&t.length>0&&v&&h){let e=we(N,"domain");v.postMessage("setSubscriberId|"+n,h),he()}let i=e.data;if(i&&i.length>0&&i.split("|").length>0){let e=i.split("|");"setSubscriberId"==e[0]&&C.setSubscriberId(e[1])}}window.addEventListener("message",w,!1);var b=navigator.platform,y=document,z=navigator,_=screen,S=window,k=S.encodeURIComponent,I=S.decodeURIComponent,x=Ie(),E=xe(navigator.userAgent),T=Ee(E),B=Te(E),N=document.URL,L,M=document.referrer.split("/"),A=null,O={},D=["setAppId","track","setSubscriberId","sendSubscriberId","sendSubscriberId"];if(void 0!==M[2]&&""!==M[0]&&(A=M[0]+"//"+M[2]),void 0!==M[2]&&""!==M[0])var A=M[0]+"//"+M[2];var C=function(e){_e([arguments],D)};C.setAppId=function(e){a=e},C.setSubscriberId=function(e){let t;window.localStorage.setItem("mepuzzId",e),oe({id:"mepuzzId",value:e})},C.sendSubscriberId=function(e){v&&h&&v.postMessage("setSubscriberId|"+e,h)},C.track=function(e,t){J(e),ne("mepuzzId").then(function(n){if(n&&n.length>0){let o;if(!0){let o=le(),i={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({event:e,app:a,token:o,mepuzzId:n,data:t,title:document.title,url:encodeURI(document.URL)})};fetch(c+"track",i)}}}).catch(function(e){})},C.framelessEventClick=function(e,t,n){let o=le(),i={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({app:a,token:o,mepuzzId:ie(),contentId:e})};fetch(c+"frameless-click",i).then(function(){var e;(window.localStorage.setItem("displayFrameless",0),n)?window.open(t,"_blank").focus():window.location=t})},C.bannerEventClick=function(e,t,n){Y(e),W(e,"click",t,n)};var q={getItem:function(e){return e&&this.hasItem(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},setItem:function(e,t,n,o,i,a){if(o="/",e&&!/^(?:expires|max\-age|path|domain|secure)$/.test(e)){var r="";if(n)switch(typeof n){case"number":r="; max-age="+n;break;case"string":r="; expires="+n;break;case"object":r="; expires="+n.toGMTString()}document.cookie=escape(e)+"="+escape(t)+r+(i?"; domain="+i:"")+"; path=/"+(a?"; secure":"")}},removeItem:function(e){if(e&&this.hasItem(e)){var t=new Date;t.setDate(t.getDate()-1),document.cookie=escape(e)+"=; expires="+t.toGMTString()+"; path=/"}},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}};function j(e){let t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return 1===n.toString().length&&(n="0"+n),1===o.toString().length&&(o="0"+o),`${t}-${n}-${o} 23:59:59`}function P(e){let t=q.getItem("mepuzzConfig");if(t)e(JSON.parse(t));else{let t=c+a+"/config";t+="?mepuzzId="+ie(),fetch(t).then(function(e){return f=e.status,e.json()}).then(function(t){if(1===t.success){let e=t.payload,n=e.app_status,o=e.app_domain,i=window.location.hostname.replace("www.","");if(n&&10===n&&o&&o.indexOf(i)>=0&&(!t.payload.subdomain||t.payload.subdomain&&1===t.payload.subdomain.allow)){let e=new Date;e.setTime(e.getTime()+864e5),q.setItem("mepuzzConfig",JSON.stringify(t.payload),e)}}e(t.payload)}).catch(function(e){})}}function H(e,t){var n=!1;return function(){n||this.readyState&&"complete"!=this.readyState||(n=!0,t())}}function R(e){var n=t;function o(){if(n.length){var t=n.shift(),i=document,a=i.createElement("script"),r=i.getElementsByTagName("script")[0];a.type="text/javascript",a.async=!0,a.defer=!0,a.onload=a.onreadystatechange=H(t,o),a.src=t,r.parentNode.insertBefore(a,r)}else e()}o()}function F(e){if(pe()){let t=window.localStorage.getItem("allowNotifSubdomain");if(!t||t&&"1"!==t){document.querySelector("head").innerHTML+='<link rel="stylesheet" href="https://static.mepuzz.com/sdk/v2/MePuzzSDKStyles.min.css" type="text/css"/>';let t="<div id='mepuzz-popover-container' class='mepuzz-popover-container mepuzz-reset slide-down'><div id='mepuzz-popover-dialog' class='mepuzz-popover-dialog'><div id='normal-popover'><div class='popover-body'><div class='popover-body-icon'><img alt='notification icon' class='' src='{logo}'></div><div class='popover-body-message'>{msg}</div><div class='clearfix'></div></div><div class='popover-footer'><button id='mepuzz-popover-allow-button' class='align-right primary popover-button'>ĐỒNG Ý</button><button id='mepuzz-popover-cancel-button' class='align-right secondary popover-button'>KHÔNG ĐỒNG Ý</button><div class='clearfix'></div></div></div></div></div>";t=(t=t.replace("{logo}",e.logo)).replace("{msg}",e.msg);let n=document.createElement("div");n.innerHTML=t,document.querySelector("body").appendChild(n),document.getElementById("mepuzz-popover-allow-button").addEventListener("click",function(){window.localStorage.setItem("allowNotifSubdomain",1),document.getElementById("mepuzz-popover-container").style.display="none";let t=e.url+"?isSubdomain=1&domain="+window.location.href;var n=window.open(t,"","height=400,width=600");setTimeout(function(){n.postMessage("hi "+e.url,e.url)},2e3)}),document.getElementById("mepuzz-popover-cancel-button").addEventListener("click",function(){let e=new Date;e.setTime(e.getTime()+864e5),q.setItem("flag_not_ask_allow_in_day",new Date,e),document.getElementById("mepuzz-popover-container").style.display="none"})}}}function U(e){let t=window.localStorage.getItem("mepuzzId");ne("mepuzzId").then(function(n){n&&null!==n&&""!==n?t!==n&&window.localStorage.setItem("mepuzzId",n):setTimeout(function(){ce(e)},3e3)}).catch(function(t){window.localStorage.setItem("mepuzzId",""),setTimeout(function(){ce(e)},3e3)})}function G(){Z()}function W(e,t,n,o){let i=le(),r={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({app:a,token:i,mepuzzId:ie(),contentId:e,action:t})};fetch(c+"track-banner",r).then(function(){var e;"click"===t&&(o?window.open(n,"_blank").focus():window.location=n)})}function X(e,t){var n=[];e.sort(),t.sort();for(var o=0;o<e.length;o+=1)t.indexOf(e[o])>-1&&n.push(e[o]);return n}function $(e,t){var n=[];e.sort(),t.sort();for(var o=0;o<e.length;o+=1)t.indexOf(e[o])>-1&&n.push(e[o]);return n.length==t.length?1:0}function J(e){let t=q.getItem("eventStaticArray");if(!(p=t?JSON.parse(t):[]).includes(e)){p.push(e);let t=new Date(j(new Date));q.setItem("eventStaticArray",JSON.stringify(p),t)}u&&u.length>0&&u.forEach(e=>{if(e.opt.segment){let t=!0,n=q.getItem("bannerConfig");n?(n=JSON.parse(n),"only_one_on_day"===e.opt.display&&n.includes(e.id)&&(t=!1)):n=[],"allDevice"!==e.opt.device&&(V()||"mobile"!==e.opt.device||(t=!1),V()&&"desktop"===e.opt.device&&(t=!1)),t&&(p.sort(),e.opt.segment&&e.opt.segment.length>0?e.opt.segment.forEach(t=>{if($(p,t)){if(K(e,e.id,e.opt.timeout,n),W(e.id,"view",null,null),t.length>=2){t.forEach(e=>{p.splice(p.indexOf(e),1)});let e=new Date(j(new Date));q.setItem("eventStaticArray",JSON.stringify(p),e)}}else;}):(K(e,e.id,e.opt.timeout,n),W(e.id,"view",null,null)))}})}function K(e,t,n,o){if(!g.includes(t)){g.push(t),setTimeout(function(){document.getElementById(t).classList.remove("mepuzz-bannner-hidden"),document.getElementById("mepuzz-btn-"+t+"-close").addEventListener("click",function(){Y(t)})},1e3*n);let i=new Date(j(new Date));if(o&&(o.includes(t)||o.push(t),q.setItem("bannerConfig",JSON.stringify(o),i)),e&&e.type&&"iframe"===e.type){let t=e.iframe_attribute,n=document.getElementById(t.id).contentWindow;setTimeout(function(){n.postMessage("hi "+t.id,t.src)},2e3)}}}function Y(e){document.getElementById(e).classList.add("mepuzz-bannner-hidden")}function V(){var e=!1,t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}function Z(){let e=c+a+"/frameless";e+="?url="+encodeURI(N),le()&&le().length>0&&(e+="&token="+le()),ie()&&ie().length>0&&(e+="&mepuzz_id="+ie()),fetch(e).then(function(e){return f=e.status,e.json()}).then(function(e){if(1===e.success&&e.data)var t=setInterval(function(){if("complete"==document.readyState){clearInterval(t);let n=document.createElement("div"),o="";if(e.data.html&&(o+=e.data.html),e.data.banner_html&&(o+=e.data.banner_html),n.innerHTML=o,document.querySelector("body").appendChild(n),e.data.html&&(document.getElementById("mp-notification-button-close").addEventListener("click",function(){window.localStorage.setItem("displayFrameless",0),document.getElementById("mp-notification-"+a).classList.remove("mp-floating-cart-active")}),document.getElementById("mp-notification-button-open").addEventListener("click",function(){window.localStorage.setItem("displayFrameless",1),document.getElementById("mp-notification-"+a).classList.add("mp-floating-cart-active")}),"1"===window.localStorage.getItem("displayFrameless")?document.getElementById("mp-notification-"+a).classList.add("mp-floating-cart-active"):"0"===window.localStorage.getItem("displayFrameless")&&document.getElementById("mp-notification-"+a).classList.remove("mp-floating-cart-active"),setTimeout(function(){Q()},2e3)),e.data.banner_html){let t=e.data.banner_option;if(u=t,t){let e,n;t.forEach(e=>{if("always"===e.opt.display&&(!e.opt.segment||e.opt.segment.length<=0)||"only_one_on_day"===e.opt.display&&(!e.opt.segment||e.opt.segment.length<=0)){let t=!0;"allDevice"!==e.opt.device&&(V()||"mobile"!==e.opt.device||(t=!1),V()&&"desktop"===e.opt.device&&(t=!1));let n=q.getItem("bannerConfig");n?(n=JSON.parse(n),"only_one_on_day"===e.opt.display&&n.includes(e.id)&&(t=!1)):n=[],t&&(K(e,e.id,e.opt.timeout,n),W(e.id,"view",null,null))}let t;if(document.getElementById("mepuzz__bn__clockdiv-"+e.id)){function n(e){let t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),i=Math.floor(t/36e5%24),a;return{total:t,days:Math.floor(t/864e5),hours:i,minutes:o,seconds:n}}function o(t,o){let i=document.getElementById(t),a=i.querySelector(".days-"+e.id),r=i.querySelector(".hours-"+e.id),s=i.querySelector(".minutes-"+e.id),l=i.querySelector(".seconds-"+e.id);function c(){let e=n(o);a.innerHTML=e.days,r.innerHTML=("0"+e.hours).slice(-2),s.innerHTML=("0"+e.minutes).slice(-2),l.innerHTML=("0"+e.seconds).slice(-2),e.total<=0&&clearInterval(d)}c();let d=setInterval(c,1e3)}let t=document.getElementById("mepuzz_time_count_down-"+e.id).value,i,a=1e3*(t=parseInt(t))-(new Date).getTime(),r=Math.round(a/1e3),s=new Date(Date.parse(new Date)+1e3*r);o("mepuzz__bn__clockdiv-"+e.id,s)}}),function(){let e=document.querySelector("[data-id-hidden='fix-js']");if(e){e.classList.remove("mepuzz-bannner-hidden");let t=document.querySelector("[data-target='carousel-tm']"),n=document.querySelector("[data-target='card']"),o=document.querySelectorAll(".slidebutton"),i=t.offsetWidth;e.classList.add("mepuzz-bannner-hidden");let a=n.currentStyle||window.getComputedStyle(n),r=Number(a.marginRight.match(/\d+/g)[0]),s=t.querySelectorAll("[data-target='card']").length,l=-(Math.ceil(s/3)*i+r*Math.ceil(s/3)-i-r),c=function(e){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,e)},d=document.getElementsByClassName("__fix_hide");for(let e=0;e<d.length;e++)d[e].getElementsByTagName("ul")[0].setAttribute("data-id-make",c(5));let m=[],u=function(e){let t=e.getAttribute("data-action"),n=e.closest(".mepuzz-bn-box-content").getElementsByTagName("ul"),o=e.closest(".mepuzz-bn-box-content").getElementsByTagName("ul")[0].getAttribute("data-id-make");null==m[o]&&(m[o]=0),"Left"==t?0!==m[o]&&(m[o]+=i+r,n[0].style.transform=`translateX(${m[o]}px)`):"Right"==t&&(m[o]>l?(m[o]-=i+r,n[0].style.transform=`translateX(${m[o]}px)`):(m[o]=0,n[0].style.transform="translateX(0px)"))};document.getElementById("mepuzz_showDetailOn").addEventListener("click",function(){let e;document.getElementById("mepuzz_showDetailOn").closest(".__fix_hide").classList.toggle("active")});for(let e in o)o[e].onclick=function(){u(this)};let p=document.getElementsByClassName("__fix_hide");for(let e=0;e<p.length;e++){let t=p[e].getElementsByTagName("li"),n=[],o=[],i=[],a,r;for(let e=0;e<t.length;e++){let s=document.getElementsByClassName("title-card-tm");s[e]&&(t[e].setAttribute("title",s[e].innerHTML),i.push(s[e].innerHTML)),r=t[e].getElementsByTagName("a")[0].href,a=t[e].getElementsByTagName("img")[0].src,o.push(a),n.push(r)}let s=p[e].getElementsByClassName("image-s"),l="";for(let e=0;e<o.length;e++)l+='<a href="'+n[e]+'" title="'+i[e]+'"><img src="'+o[e]+'"></a>';s[0].innerHTML=l}}}(),function(){let e=document.querySelector("[data-recomment-id-hidden='fix-js']");if(e){function t(e){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,e)}e.classList.remove("mepuzz-bannner-hidden");let o=document.getElementsByClassName("__fix_hide_ver2");for(let e=0;e<o.length;e++)o[e].getElementsByTagName("ul")[0].setAttribute("data-id-make-ver2",t(5));let i=document.querySelector("[data-target-ver2='carousel-tm']"),a=document.querySelector("[data-target-ver2='card']"),r=document.querySelectorAll(".slidebutton-ver2"),s=document.querySelectorAll(".__fix_hide_ver2"),l=document.getElementById("mepuzz-bn-custom-box"),c=i.offsetWidth,d=a.currentStyle||window.getComputedStyle(a),m=Number(d.marginRight.match(/\d+/g)[0]);e.classList.add("mepuzz-bannner-hidden");let u=i.querySelectorAll("[data-target-ver2='card']").length,p=-(Math.ceil(u/3)*c+m*Math.ceil(u/3)-c-m),f=[];function n(e){let t=e.getAttribute("data-action-ver2"),n=e.closest(".mepuzz-bn-box-content").getElementsByTagName("ul"),o=e.closest(".mepuzz-bn-box-content").getElementsByTagName("ul")[0].getAttribute("data-id-make");null==f[o]&&(f[o]=0),"Left"==t?0!==f[o]&&(f[o]+=c+m,n[0].style.transform=`translateX(${f[o]}px)`):"Right"==t&&(f[o]>p?(f[o]-=c+m,n[0].style.transform=`translateX(${f[o]}px)`):(f[o]=0,n[0].style.transform="translateX(0px)"))}for(let e in r)r[e].onclick=function(){n(this)}}}()}}if(e.data.suggest_list){let t;e.data.suggest_list.forEach(e=>{let t=document.getElementById("mepuzz_sg_"+e.id);if(t){t.innerHTML=e.html;let n=document.getElementById("mepuzzSuggestsBox_"+e.id);if(n){if(screen.width<1024){let t;document.getElementsByClassName("mepuzz__suggests__horizontal-"+e.id)[0]&&(n.classList.remove("mepuzz__suggests__horizontal-"+e.id),n.classList.add("mepuzz__suggests__vertical-"+e.id))}let t=n.offsetWidth,o=document.getElementById("mepuzzSuggestsList_"+e.id),i=document.getElementById("mepuzzArrowLeft_"+e.id),a=document.getElementById("mepuzzArrowRight_"+e.id),r=document.getElementsByClassName("mepuzz__suggests__item-"+e.id)[0].offsetWidth,s=document.querySelectorAll("[mepuzz-data-target='card-"+e.id+"']").length,l=r,c=0;t>=r*s&&(i.style.display="none",a.style.display="none");let d=Math.floor(t/r),m=t-d*r;i.addEventListener("click",function(){c>0&&(l-=r,o.style.transform=`translateX(-${l}px)`,c--)}),a.addEventListener("click",function(){c>0&&(l+=r),0==c&&(l=r),c>=s-d?(o.style.transform="translateX(0px)",l=r,c=0):(o.style.transform=c==s-d-1?`translateX(-${l-m}px)`:`translateX(-${l}px)`,c++)})}}})}if(e.data.social_proof_html){let t=document.createElement("div"),n=e.data.social_proof_html;t.innerHTML=n,document.querySelector("body").appendChild(t),setTimeout(function(){document.getElementById("mepuzz__social__proof").classList.add("active"),document.getElementById("mepuzz__social__proof-btn-close").addEventListener("click",function(){document.getElementById("mepuzz__social__proof").classList.remove("active")})},1e3)}if(e.data.frame_notif_html){let t=document.createElement("div"),n=e.data.frame_notif_html;t.innerHTML=n,document.querySelector("body").appendChild(t)}}},100)}).catch(function(e){})}function Q(){var e;if("denied"===Notification.permission&&document.getElementById("mepuzzFrameNotifi")){let e=q.getItem("mepuzzFrameNotifi");if(!e||"1"!==e){let e=new Date(j(new Date));q.setItem("mepuzzFrameNotifi","1",e),document.getElementById("mepuzzFrameNotifi").classList.add("active"),document.getElementById("mepuzzFrameNotifiClose").addEventListener("click",function(){document.getElementById("mepuzzFrameNotifi").classList.remove("active")})}}}function ee(e,t){window.localStorage.setItem(e,t)}function te(e){return window.localStorage.getItem(e)}function ne(e){let t=i;return new Promise(function(n,o){var i=indexedDB.open(t);i.onerror=function(e){o(Error("Error text"))},i.onupgradeneeded=function(e){e.target.transaction.abort(),o(Error("Not found"))},i.onsuccess=function(i){var a,r,s,l=i.target.result.transaction([t]).objectStore(t).get(e);l.onerror=function(e){o(Error("Error text"))},l.onsuccess=function(e){l.result?n(l.result.value):o(Error("object not found"))}}})}function oe(e){let t=i;return new Promise(function(n,o){void 0===e.id&&o(Error("object has no id."));var i=indexedDB.open(t);i.onerror=function(e){o(Error("IndexedDB database error"))},i.onupgradeneeded=function(e){var n,o=e.target.result.createObjectStore(t,{keyPath:"id"})},i.onsuccess=function(i){var a,r,s,l=i.target.result.transaction([t],"readwrite").objectStore(t).put(e);l.onerror=function(e){o(Error("Error text"))},l.onsuccess=function(e){n("Data saved OK")}}})}function ie(){let e;return window.localStorage.getItem("mepuzzId")}function ae(e){let t=window.localStorage.getItem("token");return!(t&&t.length>0)||t!==e}function re(){var e={apiKey:"AIzaSyAZTU4dgmAYkG2n4xMojp4OUlSLNjGEbpg",authDomain:"mepuzz-3086c.firebaseapp.com",databaseURL:"https://mepuzz-3086c.firebaseio.com",projectId:"mepuzz-3086c",storageBucket:"mepuzz-3086c.appspot.com",messagingSenderId:"266761263864",appId:"1:266761263864:web:4544f8867ac8e71449390d"};firebase.initializeApp(e),r=firebase.messaging(),"serviceWorker"in navigator&&navigator.serviceWorker.register(n,{scope:"/firebase-cloud-messaging-push-scope"}).then(function(e){r.useServiceWorker(e),e.update(),r.onTokenRefresh(function(){r.getToken().then(function(e){me(!1),de(e),ue()}).catch(function(e){})}),ue(),se()}).catch(function(e){})}function se(){let e;switch(we(N,"mepuzz").toLowerCase()){case"gettoken":le()}}function le(){return window.localStorage.getItem("token")}function ce(e){var t=te("flgSubs"),n=te("mepuzzId");(!ge()||ae(e)||m||"2"!==t&&!n||!t||"1"!==t||"3"===t)&&(ee("flgSubs","1"),ve(e,null))}C.init=function(){var e=Me[Le];C.L=e&&e.l,C.loaded=!0;var t=Me[Le]=C;if(e=e&&e.q)for(var n=0;n<e.length;n++)if("setAppId"===e[n][0]){a=e[n][1];break}var o=function(e){let t=(O=e).app_status,n=O.app_domain,o=window.location.hostname.replace("www.","");if(t&&10===t&&n&&n.indexOf(o)>=0){G();let e=O.subdomain;e&&e.url.indexOf(o)<=0&&1===e.status?0===e.allow?F(e):Oe&&_e(Oe,D):R(re)}};ie(),P(o)};var de=function(e){(!ge()||ae(e)||m)&&ce(e)},me=function(e){window.localStorage.setItem("sendToServer",e?"1":"0")};function ue(e){var e;"denied"!==Notification.permission&&r.getToken().then(function(e){e?(d=e,de(e),Oe&&_e(Oe,D),U(e)):(me(!1),fe())}).catch(function(e){me(!1)})}function pe(){let e=JSON.parse(q.getItem("mepuzzConfig")),t=!1,n=q.getItem("flag_not_ask_allow_in_day");if(e&&e.not_ask_allow_in_day&&1===e.not_ask_allow_in_day||n){let e=new Date;if(n){let o=new Date(e.getYear(),e.getMonth(),e.getDay()),i;new Date(new Date(n).getYear(),new Date(n).getMonth(),new Date(n).getDay())>o&&(e.setTime(e.getTime()+864e5),q.setItem("flag_not_ask_allow_in_day",new Date,e),t=!0)}else e.setTime(e.getTime()+864e5),q.setItem("flag_not_ask_allow_in_day",new Date,e),t=!0}else t=!0;return"Apple iOS"===T&&(t=!1),E.name.indexOf("Safari")>=0&&(t=!1),t}function fe(){pe()&&r.requestPermission().then(function(){ue()}).catch(function(e){he()})}function ge(){return"1"===window.localStorage.getItem("sendToServer")}function ve(e,t){let o="",i="",r="",s="",l="",d="",m="";if(t)try{void 0!==t.query&&(o=t.query),void 0!==t.city&&(i=t.city),void 0!==t.countryCode&&(r=t.countryCode),void 0!==t.country&&(s=t.country),void 0!==t.lat&&(l=t.lat),void 0!==t.lon&&(d=t.lon),void 0!==t.timezone&&(m=t.timezone)}catch(e){}let u=ie();var p=function(t){var u=JSON.stringify({language:x,subscription_id:e,mepuzzId:t,device_os:E.version,browser_name:E.name,browser_version:E.version,operating_system:T,operating_system_version:E.osversion,device_platform:B,device_model:b,ip:o,city:i,country_code:r,country_name:s,latitude:l,longitude:d,time_zone:m,url:encodeURI(N),url_ref:encodeURI(A),utm_source:we(N,"utm_source"),sdk_version:2});fetch(c+a+"/subscribe",{method:"post",body:u}).then(function(e){return e.json()}).then(function(t){let o;ee("flgSubs","2"),window.localStorage.setItem("mepuzzId",t.payload.sub_id),oe({id:"mepuzzId",value:t.payload.sub_id});let i=we(N,"isSubdomain"),a;i&&i.length>0&&v&&h&&v.postMessage("setSubscriberId|"+t.payload.sub_id,h),window.localStorage.setItem("token",e),oe({id:"token",value:e}),me(!0);let r=O.notif_wellcome?O.notif_wellcome.status:0;if(O&&1===r){let e=window.localStorage.getItem("notif_wellcome");if(!e||e&&"1"!==e){window.localStorage.setItem("notif_wellcome",r);let e=O.notif_wellcome.data,t={body:e.body,icon:e.icon,image:e.image,data:{url:e.url,notif_id:0},requireInteraction:!0};navigator.serviceWorker.register(n,{scope:"/firebase-cloud-messaging-push-scope"}).then(function(n){let o;n.showNotification(e.title,t).onclick=function(t){let n;t.preventDefault(),window.open(e.url,"_blank").focus()}}),he()}he()}he()}).catch(function(e){ee("flgSubs","3")})};ne("mepuzzId").then(function(e){p(e)}).catch(function(e){p(u)})}function he(){we(N,"isSubdomain")&&window.close()}function we(e,t){var n,o,i=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);return i?I(i[1]):""}function be(e){return e&&String(e)===e?e.replace(/^\s+|\s+$/g,""):e}function ye(e){return unescape(k(e))}function ze(){var e,t,n,o,i;for(e=0;e<arguments.length;e+=1){i=null,arguments[e]&&arguments[e].slice&&(i=arguments[e].slice());for(var a=[],r=arguments[e],s=0,l,c;s<r.length;s++)a.push(r[s]);n=(o=a).shift(),C[n]&&C[n].apply(C,o)}}function _e(e,t){var n={},o,i;for(o=0;o<t.length;o++){var a=t[o];for(n[a]=1,i=0;i<e.length;i++)if(e[i]&&e[i][0]){var r=e[i][0];a===r&&(ze(e[i]),delete e[i],n[r]++)}}return e}function Se(e){return"string"==typeof e||e instanceof String}function ke(){var e;return new Promise(function(e,t){try{let t;fetch(c+a+"/localtion").then(function(e){return f=e.status,e.json()}).then(function(t){e(t)}).catch(function(t){e("")})}catch(t){e("")}})}function Ie(){var e=navigator.language;if(e){var t=(e=e.toLowerCase()).split("-");if("zh"==t[0]){for(var n=0,o=xe.TRADITIONAL_CHINESE_LANGUAGE_TAG;n<o.length;n++){var i=o[n];if(-1!==t.indexOf(i))return"zh-Hant"}for(var a=0,r=xe.SIMPLIFIED_CHINESE_LANGUAGE_TAG;a<r.length;a++){var s=r[a];if(-1!==t.indexOf(s))return"zh-Hans"}return"zh-Hant"}return t[0].substring(0,2)}return"en"}function xe(e){var t=!0;function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var o,i=n(/(ipod|iphone|ipad)/i).toLowerCase(),a,r=!/like android/i.test(e)&&/android/i.test(e),s=/nexus\s*[0-6]\s*/i.test(e),l=!s&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),d=/silk/i.test(e),m=/sailfish/i.test(e),u=/tizen/i.test(e),p=/(web|hpw)os/i.test(e),f=/windows phone/i.test(e),g=(/SamsungBrowser/i.test(e),!f&&/windows/i.test(e)),v=!i&&!d&&/macintosh/i.test(e),h=!r&&!m&&!u&&!p&&/linux/i.test(e),w=n(/edge\/(\d+(\.\d+)?)/i),b=n(/version\/(\d+(\.\d+)?)/i),y=/tablet/i.test(e)&&!/tablet pc/i.test(e),z=!y&&/[^-]mobi/i.test(e),_=/xbox/i.test(e);/opera/i.test(e)?o={name:"Opera",opera:t,version:b||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?o={name:"Opera",opera:t,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(e)?o={name:"Samsung Internet for Android",samsungBrowser:t,version:b||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?o={name:"Opera Coast",coast:t,version:b||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?o={name:"Yandex Browser",yandexbrowser:t,version:b||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?o={name:"UC Browser",ucbrowser:t,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?o={name:"Maxthon",maxthon:t,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?o={name:"Epiphany",epiphany:t,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?o={name:"Puffin",puffin:t,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?o={name:"Sleipnir",sleipnir:t,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?o={name:"K-Meleon",kMeleon:t,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:f?(o={name:"Windows Phone",windowsphone:t},w?(o.msedge=t,o.version=w):(o.msie=t,o.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?o={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?o={name:"Chrome",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?o={name:"Microsoft Edge",msedge:t,version:w}:/vivaldi/i.test(e)?o={name:"Vivaldi",vivaldi:t,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||b}:m?o={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?o={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(o={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(o.firefoxos=t)):d?o={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?o={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?o={name:"SlimerJS",slimer:t,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?o={name:"BlackBerry",blackberry:t,version:b||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(o={name:"WebOS",webos:t,version:b||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(o.touchpad=t)):/bada/i.test(e)?o={name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:u?o={name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?o={name:"QupZilla",qupzilla:t,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?o={name:"Chromium",chromium:t,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?o={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?o={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(o={name:"Safari",safari:t},b&&(o.version=b)):i?(o={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},b&&(o.version=b)):o=/googlebot/i.test(e)?{name:"Googlebot",googlebot:t,version:n(/googlebot\/(\d+(\.\d+))/i)||b}:{name:n(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(o.name=o.name||"Blink",o.blink=t):(o.name=o.name||"Webkit",o.webkit=t),!o.version&&b&&(o.version=b)):!o.opera&&/gecko\//i.test(e)&&(o.name=o.name||"Gecko",o.gecko=t,o.version=o.version||n(/gecko\/(\d+(\.\d+)?)/i)),o.windowsphone||o.msedge||!r&&!o.silk?o.windowsphone||o.msedge||!i?v?o.mac=t:_?o.xbox=t:g?o.windows=t:h&&(o.linux=t):(o[i]=t,o.ios=t):o.android=t;var S="";o.windows?S=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):o.windowsphone?S=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.mac?S=(S=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):i?S=(S=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):r?S=n(/android[ \/-](\d+(\.\d+)*)/i):o.webos?S=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?S=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?S=n(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(S=n(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(o.osversion=S);var k=!o.windows&&S.split(".")[0];return y||l||"ipad"==i||r&&(3==k||k>=4&&!z)||o.silk?o.tablet=t:(z||"iphone"==i||"ipod"==i||r||s||o.blackberry||o.webos||o.bada)&&(o.mobile=t),o.msedge||o.msie&&o.version>=10||o.yandexbrowser&&o.version>=15||o.vivaldi&&o.version>=1||o.chrome&&o.version>=20||o.samsungBrowser&&o.version>=4||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1||o.chromium&&o.version>=20?o.a=t:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6||o.chromium&&o.version<20?o.c=t:o.x=t,o}function Ee(e){return e.mac?"Mac OS X":e.windows?"Microsoft Windows":e.windowsphone?"Microsoft Windows Phone":e.linux?"Linux":e.chromeos?"Google Chrome OS":e.android?"Google Android":e.ios?"Apple iOS":e.blackberry?"Blackberry":e.firefoxos?"Mozilla Firefox OS":e.webos?"WebOS":e.tizen?"Tizen":e.sailfish?"Sailfish OS":"Unknown"}function Te(e){var t=e.mobile,n=e.tablet;return t?"Mobile":n?"Tablet":"Desktop"}var Be,Ne=function(e){return e?e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""};db=function(){};var Le=function(e){return null!=e&&-1<(e.constructor+"").indexOf("String")}(window.MePuzzAnalyticsObject)&&Ne(window.MePuzzAnalyticsObject)||"mePuzz",Me=window,Ae=document,Oe=Me[Le],De;if(Oe=Oe&&Oe.q,"undefined"!=typeof appId&&void 0===Oe)a=appId;else if("undefined"!=typeof _mepuzzPaq&&void 0===Oe){for(var Ce=0;Ce<_mepuzzPaq.length;Ce++)if("setAppId"===_mepuzzPaq[Ce][0]){a=_mepuzzPaq[Ce][1];break}}else if("undefined"!=typeof _paq&&void 0===Oe)for(var Ce=0;Ce<_paq.length;Ce++)if("setAppId"===_paq[Ce][0]){a=_paq[Ce][1];break}(0,C.init)()}(window);